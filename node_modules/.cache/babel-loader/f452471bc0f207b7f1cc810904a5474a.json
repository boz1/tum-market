{"ast":null,"code":"import _taggedTemplateLiteral from \"C:\\\\Users\\\\JFrancisco\\\\Documents\\\\tum-market\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"C:\\\\Users\\\\JFrancisco\\\\Documents\\\\tum-market\\\\src\\\\components\\\\advertisement\\\\AdDetails.js\";\n\nfunction _templateObject() {\n  const data = _taggedTemplateLiteral([\"\\n    display: block;\\n    margin: 0 auto;\\n    border-color: red;\\n\"]);\n\n  _templateObject = function () {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport firebase, { storage } from '../../config/firebaseConfig';\nimport Title from '../Title';\nimport Card from 'react-bootstrap/Card';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport Alert from 'react-bootstrap/Alert';\nimport history from '../../history';\nimport Edit from './Edit';\nimport Modal from 'react-bootstrap/Modal';\nimport { css } from '@emotion/core';\nimport { RingLoader } from 'react-spinners';\nimport ConfirmationModal from '../ConfirmationModal';\nconst override = css(_templateObject());\nexport default class AdDetails extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleDelete = event => {\n      event.preventDefault();\n      this.setState({\n        loading: true\n      });\n      const ad = this.props.location.state.ad;\n      this.checkAdSentReq(ad).then(reqs => {\n        reqs.forEach(req => {\n          firebase.database().ref('trade-requests').child(ad.userId).child(req.id).remove();\n          firebase.database().ref('received-offers').child(req.sellerId).child(req.id).remove();\n          var newPostKey = firebase.database().ref('notifications').child(req.sellerId).push().key;\n          const notification = {\n            id: newPostKey,\n            message: ad.user.name + \" has deleted their \" + ad.title + \" advertisement. The trade offer sent to you is also deleted.\",\n            isRead: false\n          };\n          var updates = {};\n          updates['/notifications/' + req.sellerId + '/' + newPostKey] = notification;\n          firebase.database().ref().update(updates);\n        });\n      }).catch(er => {\n        console.log(er);\n      });\n      this.checkAdReceivedReq(ad).then(reqs => {\n        reqs.forEach(req => {\n          firebase.database().ref('received-offers').child(ad.userId).child(req.id).remove();\n          firebase.database().ref('trade-requests').child(req.buyerId).child(req.id).remove();\n          var newPostKey = firebase.database().ref('notifications').child(req.buyerId).push().key;\n          const notification = {\n            id: newPostKey,\n            message: ad.user.name + \" has deleted their \" + ad.title + \" advertisement. The trade offer you sent is also deleted.\",\n            isRead: false\n          };\n          var updates = {};\n          updates['/notifications/' + req.buyerId + '/' + newPostKey] = notification;\n          firebase.database().ref().update(updates);\n        });\n      }).catch(er => {\n        console.log(er);\n      });\n      firebase.database().ref('advertisements').child(ad.userId).child(ad.id).remove();\n      const deleteImageRef = storage.ref(\"images/\".concat(ad.userId, \"/\").concat(ad.id, \"/\").concat(ad.imageTitle)); // Delete the file\n\n      deleteImageRef.delete().then(function () {\n        history.push('/');\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    this.checkAdSentReq = ad => {\n      return new Promise(function (res, rej) {\n        const checkTradeReqRef = firebase.database().ref('trade-requests').child(ad.userId).orderByChild(\"offeredItemId\").equalTo(ad.id);\n        checkTradeReqRef.once('value').then(snap => {\n          if (snap.val() !== null) {\n            const reqs = Object.values(snap.val());\n            res(reqs);\n          } else {\n            res([]);\n          }\n        }).catch(er => {\n          rej(er);\n        });\n      });\n    };\n\n    this.checkAdReceivedReq = ad => {\n      return new Promise(function (res, rej) {\n        const checkReceivedReqRef = firebase.database().ref('received-offers').child(ad.userId).orderByChild(\"sentItemId\").equalTo(ad.id);\n        checkReceivedReqRef.once('value').then(snap => {\n          if (snap.val() !== null) {\n            const reqs = Object.values(snap.val());\n            res(reqs);\n          } else {\n            res([]);\n          }\n        }).catch(er => {\n          rej(er);\n        });\n      });\n    };\n\n    this.showDeleteModal = e => {\n      e.preventDefault();\n      this.setState({\n        showDeleteModal: true\n      });\n    };\n\n    this.showEditModal = e => {\n      e.preventDefault();\n      const ad = this.props.location.state.ad;\n      const req = this.checkAdSentReq(ad);\n      req.then(reqs => {\n        if (reqs.length > 0) {\n          this.setState({\n            isEditable: false\n          });\n        } else {\n          const req2 = this.checkAdReceivedReq(ad);\n          req2.then(reqs => {\n            if (reqs.length > 0) {\n              this.setState({\n                isEditable: false\n              });\n            } else {\n              this.setState({\n                showEditModal: true\n              });\n            }\n          });\n        }\n      }).catch(er => {\n        console.log(er);\n      });\n    };\n\n    this.state = {\n      offeredItem: '',\n      isOfferSubmitted: false,\n      showAlert: false,\n      isAlreadyOffered: false,\n      showModal: false,\n      showDeleteModal: false,\n      showEditModal: false,\n      isEditable: true,\n      loading: false\n    };\n    this.showRequestModal = this.showRequestModal.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  componentDidMount() {\n    const tradeOffers = this.props.location.state.user.tradeReq;\n    const ad = this.props.location.state.ad;\n    let isOffered = false;\n    tradeOffers.forEach(function (trade) {\n      if (trade.targetItemId === ad.id) {\n        isOffered = true;\n      }\n    });\n    this.setState({\n      isAlreadyOffered: isOffered\n    });\n  }\n\n  handleChange(event) {\n    const title = event.target.value;\n    this.setState({\n      offeredItem: title\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    const ad = this.props.location.state.ad;\n    const user = this.props.location.state.user;\n    const itemId = this.state.offeredItem.split('&')[1]; // Get a key for a new Post.\n\n    var newPostKey = firebase.database().ref('trade-requests').child(user.info.id).push().key; // Get date\n\n    var today = new Date(),\n        date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate() + \" \" + today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n    const postDataBuyer = {\n      offeredItemId: itemId,\n      sellerId: ad.userId,\n      targetItemId: ad.id,\n      userId: user.info.id,\n      id: newPostKey,\n      status: '-',\n      date: date\n    };\n    const postDataSeller = {\n      receivedItemId: itemId,\n      userId: ad.userId,\n      sentItemId: ad.id,\n      buyerId: user.info.id,\n      id: newPostKey,\n      status: '-',\n      date: date\n    };\n    const notification = {\n      id: newPostKey,\n      message: \"You have a new trade request from \" + user.info.name + \" for your \" + ad.title + \".\",\n      isRead: false\n    };\n    var updates = {};\n    updates['/trade-requests/' + user.info.id + '/' + newPostKey] = postDataBuyer;\n    updates['/received-offers/' + ad.userId + '/' + newPostKey] = postDataSeller;\n    updates['/notifications/' + ad.userId + '/' + newPostKey] = notification;\n    firebase.database().ref().update(updates);\n    this.setState({\n      isOfferSubmitted: true,\n      showAlert: true,\n      showModal: false\n    });\n  }\n\n  showRequestModal(e) {\n    e.preventDefault();\n    this.setState({\n      showModal: true\n    });\n  }\n\n  handleClose() {\n    this.setState({\n      showModal: false,\n      showDeleteModal: false,\n      showEditModal: false\n    });\n  }\n\n  render() {\n    const ad = this.props.location.state.ad;\n    const adOwner = ad.user;\n    const user = this.props.location.state.user;\n    let actionField;\n    let loading = React.createElement(Modal, {\n      show: this.state.loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, React.createElement(RingLoader, {\n      css: override,\n      sizeUnit: \"px\",\n      size: 100,\n      color: '#006BD6',\n      loading: this.state.loading,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    })));\n    let items = [];\n    items.push(React.createElement(\"option\", {\n      key: \"empty\",\n      disabled: true,\n      value: '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, \"Choose...\"));\n\n    if (user.ads !== null & user.ads !== undefined) {\n      Object.values(user.ads).map(item => items.push(React.createElement(\"option\", {\n        key: item.id,\n        value: item.title + '&' + item.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, item.title)));\n    }\n\n    const confTxt = React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, \"You are offering \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, this.state.offeredItem.split('&')[0]), \" for \", adOwner.name, \"'s \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, ad.title), \". Do you want to send this trade request?\\\"\");\n    const modal = React.createElement(ConfirmationModal, {\n      show: this.state.showModal,\n      onHide: this.handleClose,\n      title: \"Trade Request\",\n      txt: confTxt,\n      onClickClose: this.handleClose,\n      onClickConfirm: this.handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    });\n    const delTxt = React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, \"Deleting this advertisement will also \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    }, \"delete any trade request this item has been used\"), \". Are you sure to delete this advertisement?\");\n    const deleteModal = React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }, React.createElement(ConfirmationModal, {\n      show: this.state.showDeleteModal,\n      onHide: this.handleClose,\n      title: \"Delete Advertisement\",\n      txt: delTxt,\n      onClickClose: this.handleClose,\n      onClickConfirm: this.handleDelete,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }), loading);\n    const editModal = React.createElement(Edit, {\n      show: this.state.showEditModal,\n      close: this.handleClose,\n      user: this.props.location.state.user,\n      ad: this.props.location.state.ad,\n      categories: this.props.location.state.categories,\n      subCategories: this.props.location.state.subCategories,\n      conditions: this.props.location.state.conditions,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    });\n    const editAlert = React.createElement(Alert, {\n      show: !this.state.isEditable,\n      variant: \"danger\",\n      style: {\n        marginTop: \"10px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, \"This item can't be edited since it is used in a trade request.\");\n\n    if (ad.trade && user.info.id !== ad.userId && !this.state.isOfferSubmitted && !this.state.isAlreadyOffered) {\n      actionField = React.createElement(\"div\", {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"text-sub-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296\n        },\n        __self: this\n      }, \"Trade Request\"), React.createElement(Card, {\n        style: {\n          width: '18rem',\n          background: 'whitesmoke'\n        },\n        className: \"mt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297\n        },\n        __self: this\n      }, React.createElement(Card.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298\n        },\n        __self: this\n      }, React.createElement(Form, {\n        onSubmit: e => this.showRequestModal(e),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      }, React.createElement(Form.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300\n        },\n        __self: this\n      }, React.createElement(Form.Group, {\n        controlId: \"tradeItem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301\n        },\n        __self: this\n      }, React.createElement(Form.Label, {\n        style: {\n          fontSize: \"16px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302\n        },\n        __self: this\n      }, \"Your Items\"), React.createElement(Form.Control, {\n        required: true,\n        defaultValue: '',\n        as: \"select\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303\n        },\n        __self: this\n      }, items))), React.createElement(\"div\", {\n        style: {\n          marginLeft: \"-5px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        onClick: this.showModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309\n        },\n        __self: this\n      }, \"Send Request\"))))));\n    } else if (user.info.id === ad.userId) {\n      actionField = React.createElement(\"div\", {\n        className: \"mt-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319\n        },\n        __self: this\n      }, React.createElement(Card, {\n        style: {\n          width: '18rem',\n          background: 'whitesmoke'\n        },\n        className: \"mt-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320\n        },\n        __self: this\n      }, React.createElement(Card.Body, {\n        className: \"d-block m-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      }, editAlert), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"danger\",\n        type: \"submit\",\n        onClick: this.showDeleteModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326\n        },\n        __self: this\n      }, \"Delete\"), React.createElement(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        className: \"float-right ml-5\",\n        onClick: this.showEditModal,\n        disabled: !this.state.isEditable,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329\n        },\n        __self: this\n      }, \"Edit\")))));\n    }\n\n    const requestSentAlert = React.createElement(Alert, {\n      show: this.state.showAlert,\n      variant: \"success\",\n      style: {\n        width: '18rem',\n        marginTop: \"10px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }, \"Your trade offer is sent.\");\n    const alreadyAlert = React.createElement(Alert, {\n      show: this.state.isAlreadyOffered,\n      variant: \"info\",\n      style: {\n        width: '18rem',\n        marginTop: \"10px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342\n      },\n      __self: this\n    }, \"You have already sent a trade request for this item.\");\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, React.createElement(Title, {\n      title: ad.title,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      className: \"my-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-12 d-flex p-0\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"text-sub-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, \"Details\"), React.createElement(\"div\", {\n      className: \"d-flex mt-2 col-sm-12 p-0 detail-div\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-6 m-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: ad.image,\n      style: {\n        height: \"290px\",\n        width: \"300px\",\n        marginLeft: \"12px\"\n      },\n      alt: \"Product\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-sm-6 my-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"align-content-center category-list details-list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"center-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"float-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }, \"ID\"), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }, ad.id)), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362\n      },\n      __self: this\n    }), React.createElement(\"li\", {\n      className: \"center-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"float-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, \"Date Added\"), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, ad.dateAdded.split(' ')[0])), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364\n      },\n      __self: this\n    }), React.createElement(\"li\", {\n      className: \"center-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"float-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }, \"Main Category\"), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 365\n      },\n      __self: this\n    }, ad.mainCategory.title)), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366\n      },\n      __self: this\n    }), React.createElement(\"li\", {\n      className: \"center-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"float-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367\n      },\n      __self: this\n    }, \"Sub Category\"), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367\n      },\n      __self: this\n    }, ad.subCategory.title)), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368\n      },\n      __self: this\n    }), React.createElement(\"li\", {\n      className: \"center-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"float-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369\n      },\n      __self: this\n    }, \"Condition\"), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369\n      },\n      __self: this\n    }, ad.condition.title)), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370\n      },\n      __self: this\n    }), React.createElement(\"li\", {\n      className: \"center-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"float-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, \"Trade\"), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371\n      },\n      __self: this\n    }, ad.trade ? \"Yes\" : \"No\")), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372\n      },\n      __self: this\n    }), React.createElement(\"li\", {\n      className: \"center-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"float-left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    }, \"Price\"), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 373\n      },\n      __self: this\n    }, ad.price + \" €\"))))), React.createElement(\"div\", {\n      className: \"my-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378\n      },\n      __self: this\n    }, React.createElement(Card.Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"text-sub-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }, \"Description\")), React.createElement(Card.Body, {\n      style: {\n        fontSize: \"16px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381\n      },\n      __self: this\n    }, ' ', ad.description, ' '))))), React.createElement(\"div\", {\n      className: \"col-md-4 d-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"text-sub-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }, \"Contact\"), React.createElement(Card, {\n      style: {\n        width: '18rem',\n        background: 'oldlace'\n      },\n      className: \"mt-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }, React.createElement(Card.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"d-flex bold text-premium\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395\n      },\n      __self: this\n    }, React.createElement(Card.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396\n      },\n      __self: this\n    }, adOwner.name)), React.createElement(\"div\", {\n      className: \"ml-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398\n      },\n      __self: this\n    }, adOwner.isPremium ? \"Premium\" : \"\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402\n      },\n      __self: this\n    }, React.createElement(Card.Text, {\n      className: \"d-block mb-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403\n      },\n      __self: this\n    }, adOwner.address)), React.createElement(\"div\", {\n      className: \"d-block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408\n      },\n      __self: this\n    }, adOwner.telephone), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411\n      },\n      __self: this\n    }, adOwner.email))))), actionField, requestSentAlert, alreadyAlert)), modal, deleteModal, editModal)));\n  }\n\n}","map":{"version":3,"sources":["C:\\Users\\JFrancisco\\Documents\\tum-market\\src\\components\\advertisement\\AdDetails.js"],"names":["React","Component","firebase","storage","Title","Card","Form","Button","Alert","history","Edit","Modal","css","RingLoader","ConfirmationModal","override","AdDetails","constructor","props","handleDelete","event","preventDefault","setState","loading","ad","location","state","checkAdSentReq","then","reqs","forEach","req","database","ref","child","userId","id","remove","sellerId","newPostKey","push","key","notification","message","user","name","title","isRead","updates","update","catch","er","console","log","checkAdReceivedReq","buyerId","deleteImageRef","imageTitle","delete","error","Promise","res","rej","checkTradeReqRef","orderByChild","equalTo","once","snap","val","Object","values","checkReceivedReqRef","showDeleteModal","e","showEditModal","length","isEditable","req2","offeredItem","isOfferSubmitted","showAlert","isAlreadyOffered","showModal","showRequestModal","bind","handleClose","handleChange","handleSubmit","componentDidMount","tradeOffers","tradeReq","isOffered","trade","targetItemId","target","value","itemId","split","info","today","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","postDataBuyer","offeredItemId","status","postDataSeller","receivedItemId","sentItemId","render","adOwner","actionField","items","ads","undefined","map","item","confTxt","modal","delTxt","deleteModal","editModal","categories","subCategories","conditions","editAlert","marginTop","width","background","fontSize","marginLeft","requestSentAlert","alreadyAlert","image","height","dateAdded","mainCategory","subCategory","condition","price","description","isPremium","address","telephone","email"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport firebase, {storage} from '../../config/firebaseConfig';\r\nimport Title from '../Title'\r\nimport Card from 'react-bootstrap/Card';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport history from '../../history'\r\nimport Edit from './Edit';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport { css } from '@emotion/core';\r\nimport { RingLoader } from 'react-spinners';\r\nimport ConfirmationModal from '../ConfirmationModal'\r\n\r\nconst override = css`\r\n    display: block;\r\n    margin: 0 auto;\r\n    border-color: red;\r\n`;\r\n\r\nexport default class AdDetails extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            offeredItem: '',\r\n            isOfferSubmitted: false,\r\n            showAlert: false,\r\n            isAlreadyOffered: false,\r\n            showModal: false,\r\n            showDeleteModal: false,\r\n            showEditModal: false,\r\n            isEditable: true,\r\n            loading: false\r\n        }\r\n\r\n        this.showRequestModal = this.showRequestModal.bind(this)\r\n        this.handleClose = this.handleClose.bind(this)\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        const tradeOffers = this.props.location.state.user.tradeReq;\r\n        const ad = this.props.location.state.ad;\r\n        let isOffered = false;\r\n\r\n        tradeOffers.forEach(function (trade) {\r\n            if (trade.targetItemId === ad.id) {\r\n                isOffered = true;\r\n            }\r\n        })\r\n\r\n        this.setState({\r\n            isAlreadyOffered: isOffered\r\n        })\r\n    }\r\n\r\n    handleChange(event) {\r\n        const title = event.target.value\r\n        this.setState({ offeredItem: title });\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        const ad = this.props.location.state.ad;\r\n        const user = this.props.location.state.user;\r\n        const itemId = this.state.offeredItem.split('&')[1];\r\n\r\n        // Get a key for a new Post.\r\n        var newPostKey = firebase.database().ref('trade-requests').child(user.info.id).push().key;\r\n\r\n        // Get date\r\n        var today = new Date(),\r\n            date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate() + \" \" + today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\r\n\r\n        const postDataBuyer = {\r\n            offeredItemId: itemId,\r\n            sellerId: ad.userId,\r\n            targetItemId: ad.id,\r\n            userId: user.info.id,\r\n            id: newPostKey,\r\n            status: '-',\r\n            date: date\r\n        };\r\n\r\n        const postDataSeller = {\r\n            receivedItemId: itemId,\r\n            userId: ad.userId,\r\n            sentItemId: ad.id,\r\n            buyerId: user.info.id,\r\n            id: newPostKey,\r\n            status: '-',\r\n            date: date\r\n        };\r\n\r\n        const notification = {\r\n            id: newPostKey,\r\n            message: \"You have a new trade request from \" + user.info.name + \" for your \" + ad.title + \".\",\r\n            isRead: false\r\n        };\r\n\r\n        var updates = {};\r\n        updates['/trade-requests/' + user.info.id + '/' + newPostKey] = postDataBuyer;\r\n        updates['/received-offers/' + ad.userId + '/' + newPostKey] = postDataSeller;\r\n        updates['/notifications/' + ad.userId + '/' + newPostKey] = notification;\r\n\r\n        firebase.database().ref().update(updates);\r\n\r\n        this.setState({\r\n            isOfferSubmitted: true,\r\n            showAlert: true,\r\n            showModal: false\r\n        })\r\n    }\r\n\r\n    showRequestModal(e) {\r\n        e.preventDefault();\r\n\r\n        this.setState({\r\n            showModal: true\r\n        })\r\n    }\r\n\r\n    handleDelete = (event) => {\r\n        event.preventDefault()\r\n        this.setState({\r\n            loading: true,\r\n        })\r\n\r\n        const ad = this.props.location.state.ad;\r\n\r\n        this.checkAdSentReq(ad).then(reqs => {\r\n            reqs.forEach((req) => {\r\n                firebase.database().ref('trade-requests').child(ad.userId).child(req.id).remove()\r\n                firebase.database().ref('received-offers').child(req.sellerId).child(req.id).remove()\r\n\r\n                var newPostKey = firebase.database().ref('notifications').child(req.sellerId).push().key;\r\n\r\n                const notification = {\r\n                    id: newPostKey,\r\n                    message: ad.user.name + \" has deleted their \" + ad.title + \" advertisement. The trade offer sent to you is also deleted.\",\r\n                    isRead: false\r\n                };\r\n\r\n                var updates = {};\r\n                updates['/notifications/' + req.sellerId + '/' + newPostKey] = notification;\r\n                firebase.database().ref().update(updates);\r\n            })\r\n        }).catch(er => {\r\n            console.log(er)\r\n        })\r\n\r\n        this.checkAdReceivedReq(ad).then(reqs => {\r\n            reqs.forEach((req) => {\r\n                firebase.database().ref('received-offers').child(ad.userId).child(req.id).remove()\r\n                firebase.database().ref('trade-requests').child(req.buyerId).child(req.id).remove()\r\n\r\n                var newPostKey = firebase.database().ref('notifications').child(req.buyerId).push().key;\r\n\r\n                const notification = {\r\n                    id: newPostKey,\r\n                    message: ad.user.name + \" has deleted their \" + ad.title + \" advertisement. The trade offer you sent is also deleted.\",\r\n                    isRead: false\r\n                };\r\n\r\n                var updates = {};\r\n                updates['/notifications/' + req.buyerId + '/' + newPostKey] = notification;\r\n                firebase.database().ref().update(updates);\r\n            })\r\n        }).catch(er => {\r\n            console.log(er)\r\n        })\r\n\r\n        firebase.database().ref('advertisements').child(ad.userId).child(ad.id).remove();\r\n\r\n        const deleteImageRef = storage.ref(`images/${ad.userId}/${ad.id}/${ad.imageTitle}`)\r\n        \r\n        // Delete the file\r\n        deleteImageRef.delete().then(function () {\r\n            history.push('/')\r\n        }).catch(function (error) {\r\n            console.log(error)\r\n        });\r\n    }\r\n\r\n    checkAdSentReq = (ad) => {\r\n        return new Promise(function (res, rej) {\r\n            const checkTradeReqRef = firebase.database().ref('trade-requests').child(ad.userId).orderByChild(\"offeredItemId\").equalTo(ad.id)\r\n            checkTradeReqRef.once('value').then(snap => {\r\n                if (snap.val() !== null) {\r\n                    const reqs = Object.values(snap.val())\r\n                    res(reqs);\r\n                } else {\r\n                    res([]);\r\n                }\r\n            }).catch(er => {\r\n                rej(er)\r\n            })\r\n        })\r\n    }\r\n\r\n    checkAdReceivedReq = (ad) => {\r\n        return new Promise(function (res, rej) {\r\n            const checkReceivedReqRef = firebase.database().ref('received-offers').child(ad.userId).orderByChild(\"sentItemId\").equalTo(ad.id)\r\n            checkReceivedReqRef.once('value').then(snap => {\r\n                if (snap.val() !== null) {\r\n                    const reqs = Object.values(snap.val())\r\n                    res(reqs);\r\n                } else {\r\n                    res([]);\r\n                }\r\n            }).catch(er => {\r\n                rej(er)\r\n            })\r\n        })\r\n    }\r\n\r\n    showDeleteModal = (e) => {\r\n        e.preventDefault();\r\n        this.setState({ showDeleteModal: true })\r\n    }\r\n\r\n    showEditModal = (e) => {\r\n        e.preventDefault();\r\n        const ad = this.props.location.state.ad;\r\n\r\n        const req = this.checkAdSentReq(ad)\r\n        req.then(reqs => {\r\n            if (reqs.length > 0) {\r\n                this.setState({\r\n                    isEditable: false\r\n                })\r\n            } else {\r\n                const req2 = this.checkAdReceivedReq(ad);\r\n                req2.then(reqs => {\r\n                    if (reqs.length > 0) {\r\n                        this.setState({\r\n                            isEditable: false\r\n                        })\r\n                    }\r\n                    else {\r\n                        this.setState({\r\n                            showEditModal: true\r\n                        })\r\n                    }\r\n                })\r\n            }\r\n        }).catch(er => {\r\n            console.log(er)\r\n        })\r\n    }\r\n\r\n    handleClose() {\r\n        this.setState({ showModal: false, showDeleteModal: false, showEditModal: false });\r\n    }\r\n\r\n    render() {\r\n        const ad = this.props.location.state.ad;\r\n        const adOwner = ad.user;\r\n        const user = this.props.location.state.user;\r\n        let actionField;\r\n        \r\n        let loading = <Modal show={this.state.loading}>\r\n            <Modal.Body>\r\n                <RingLoader\r\n                    css={override}\r\n                    sizeUnit={\"px\"}\r\n                    size={100}\r\n                    color={'#006BD6'}\r\n                    loading={this.state.loading}\r\n                />\r\n            </Modal.Body>\r\n        </Modal>\r\n\r\n        let items = [];\r\n        items.push(<option key=\"empty\" disabled value={''}>Choose...</option>)\r\n\r\n        if (user.ads !== null & user.ads !== undefined) {\r\n            Object.values(user.ads).map((item) => items.push(<option key={item.id} value={item.title + '&' + item.id}>{item.title}</option>))\r\n        }\r\n\r\n        const confTxt = <span>You are offering <strong>{this.state.offeredItem.split('&')[0]}</strong> for {adOwner.name}'s <strong>{ad.title}</strong>. Do you want to send this trade request?\"</span>\r\n        const modal = <ConfirmationModal show={this.state.showModal} onHide={this.handleClose} title=\"Trade Request\" txt={confTxt} onClickClose={this.handleClose} onClickConfirm={this.handleSubmit} />\r\n\r\n        const delTxt = <span>Deleting this advertisement will also <strong>delete any trade request this item has been used</strong>. Are you sure to delete this advertisement?</span>\r\n        const deleteModal = <span><ConfirmationModal show={this.state.showDeleteModal} onHide={this.handleClose} title=\"Delete Advertisement\" txt={delTxt} onClickClose={this.handleClose} onClickConfirm={this.handleDelete} />\r\n        {loading}</span>\r\n\r\n        const editModal = <Edit show={this.state.showEditModal} close={this.handleClose} user={this.props.location.state.user} ad={this.props.location.state.ad} categories={this.props.location.state.categories} subCategories={this.props.location.state.subCategories} conditions={this.props.location.state.conditions} />\r\n        const editAlert = <Alert show={!this.state.isEditable} variant={\"danger\"} style={{ marginTop: \"10px\" }} >\r\n            This item can't be edited since it is used in a trade request.\r\n        </Alert>\r\n\r\n        if (ad.trade && user.info.id !== ad.userId && !this.state.isOfferSubmitted && !this.state.isAlreadyOffered) {\r\n            actionField = <div className=\"mt-3\">\r\n                <span className=\"text-sub-title\">Trade Request</span>\r\n                <Card style={{ width: '18rem', background: 'whitesmoke' }} className=\"mt-2\">\r\n                    <Card.Body>\r\n                        <Form onSubmit={e => this.showRequestModal(e)}>\r\n                            <Form.Row>\r\n                                <Form.Group controlId=\"tradeItem\">\r\n                                    <Form.Label style={{ fontSize: \"16px\" }}>Your Items</Form.Label>\r\n                                    <Form.Control required defaultValue={''} as=\"select\" onChange={this.handleChange}>\r\n                                        {items}\r\n                                    </Form.Control>\r\n                                </Form.Group>\r\n                            </Form.Row>\r\n                            <div style={{ marginLeft: \"-5px\" }}>\r\n                                <Button variant=\"primary\" type=\"submit\" onClick={this.showModal}>\r\n                                    Send Request\r\n                             </Button>\r\n                            </div>\r\n                        </Form>\r\n                    </Card.Body>\r\n                </Card>\r\n            </div >;\r\n        }\r\n        else if (user.info.id === ad.userId) {\r\n            actionField = <div className=\"mt-3\">\r\n                <Card style={{ width: '18rem', background: 'whitesmoke' }} className=\"mt-2\">\r\n                    <Card.Body className=\"d-block m-auto\">\r\n                        <div>\r\n                            {editAlert}\r\n                        </div>\r\n                        <div>\r\n                            <Button variant=\"danger\" type=\"submit\" onClick={this.showDeleteModal}>\r\n                                Delete\r\n                            </Button>\r\n                            <Button variant=\"primary\" type=\"submit\" className=\"float-right ml-5\" onClick={this.showEditModal} disabled={!this.state.isEditable}>\r\n                                Edit\r\n                            </Button>\r\n                        </div>\r\n                    </Card.Body>\r\n                </Card>\r\n            </div>;\r\n        }\r\n\r\n        const requestSentAlert = <Alert show={this.state.showAlert} variant={\"success\"} style={{ width: '18rem', marginTop: \"10px\" }} >\r\n            Your trade offer is sent.\r\n          </Alert>\r\n\r\n        const alreadyAlert = <Alert show={this.state.isAlreadyOffered} variant={\"info\"} style={{ width: '18rem', marginTop: \"10px\" }} >\r\n            You have already sent a trade request for this item.\r\n          </Alert>\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"container\">\r\n                    <Title title={ad.title} />\r\n                    <hr className=\"my-2\"></hr>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-12 d-flex p-0\">\r\n                            <div className=\"col-md-8\">\r\n                                <span className=\"text-sub-title\">Details</span>\r\n                                <div className=\"d-flex mt-2 col-sm-12 p-0 detail-div\">\r\n                                    <div className=\"col-sm-6 m-auto\">\r\n                                        <img src={ad.image} style={{ height: \"290px\", width: \"300px\", marginLeft: \"12px\" }} alt=\"Product\" />\r\n                                    </div>\r\n                                    <div className=\"col-sm-6 my-3\">\r\n                                        <ul className=\"align-content-center category-list details-list\">\r\n                                            <li className=\"center-item\"><span className=\"float-left\">ID</span><strong>{ad.id}</strong></li>\r\n                                            <hr></hr>\r\n                                            <li className=\"center-item\"><span className=\"float-left\">Date Added</span><strong>{ad.dateAdded.split(' ')[0]}</strong></li>\r\n                                            <hr></hr>\r\n                                            <li className=\"center-item\"><span className=\"float-left\">Main Category</span><strong>{ad.mainCategory.title}</strong></li>\r\n                                            <hr></hr>\r\n                                            <li className=\"center-item\"><span className=\"float-left\">Sub Category</span><strong>{ad.subCategory.title}</strong></li>\r\n                                            <hr></hr>\r\n                                            <li className=\"center-item\"><span className=\"float-left\">Condition</span><strong>{ad.condition.title}</strong></li>\r\n                                            <hr></hr>\r\n                                            <li className=\"center-item\"><span className=\"float-left\">Trade</span><strong>{ad.trade ? \"Yes\" : \"No\"}</strong></li>\r\n                                            <hr></hr>\r\n                                            <li className=\"center-item\"><span className=\"float-left\">Price</span><strong>{ad.price + \" €\"}</strong></li>\r\n                                        </ul>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"my-3\">\r\n                                    <Card>\r\n                                        <Card.Header><span className=\"text-sub-title\">Description</span></Card.Header>\r\n                                        <Card.Body style={{ fontSize: \"16px\" }}>\r\n                                            <p>\r\n                                                {' '}\r\n                                                {ad.description}{' '}\r\n                                            </p>\r\n                                        </Card.Body>\r\n                                    </Card>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"col-md-4 d-block\">\r\n                                <div>\r\n                                    <span className=\"text-sub-title\">Contact</span>\r\n                                    <Card style={{ width: '18rem', background: 'oldlace' }} className=\"mt-2\">\r\n                                        <Card.Body>\r\n                                            <div className=\"d-flex bold text-premium\">\r\n                                                <div>\r\n                                                    <Card.Title >{adOwner.name}</Card.Title>\r\n                                                </div>\r\n                                                <div className=\"ml-auto\">\r\n                                                    {adOwner.isPremium ? \"Premium\" : \"\"}\r\n                                                </div>\r\n                                            </div>\r\n                                            <div>\r\n                                                <Card.Text className=\"d-block mb-1\">\r\n                                                    {adOwner.address}\r\n                                                </Card.Text>\r\n                                            </div>\r\n                                            <div className=\"d-block\">\r\n                                                <div>\r\n                                                    {adOwner.telephone}\r\n                                                </div>\r\n                                                <div>\r\n                                                    {adOwner.email}\r\n                                                </div>\r\n                                            </div>\r\n                                        </Card.Body>\r\n                                    </Card>\r\n                                </div>\r\n                                {actionField}\r\n                                {requestSentAlert}\r\n                                {alreadyAlert}\r\n                            </div>\r\n                        </div>\r\n                        {modal}\r\n                        {deleteModal}\r\n                        {editModal}\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}